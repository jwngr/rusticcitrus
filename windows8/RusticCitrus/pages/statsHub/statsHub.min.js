!function(){"use strict";function e(){var e=$(".statsHub .hub")[0];e.addEventListener("headerinvoked",i)}function t(){var e=$(".statsHub .hub")[0];e.removeEventListener("headerinvoked",i)}function i(e){switch(e.detail.index){case 0:WinJS.Navigation.navigate("/pages/highScores/highScores.html");break;case 1:WinJS.Navigation.navigate("/pages/achievements/achievements.html")}}function n(){RC.assert("object"==typeof RC.Achievements,"Achievements namespace should already be defined"),RC.assert("object"==typeof RC.Achievements.dictionary,"Achievements dictionary should be undefined");var e={};for(var t in RC.Achievements.dictionary){for(var i=RC.Achievements.dictionary[t],n=i.length,r=0,s=0;n>s;++s)i[s].isComplete&&(r+=1);var o=(100*(r/n)).toFixed(1);"100.0"==o&&(o="100"),e[t]={numAchievements:n,numAchievementsCompleted:r,ratio:r+"/"+n,percentage:o+"%"}}$("#fiveLetterAchievementsGrid > .ratio").text(e["5"].ratio),$("#fiveLetterAchievementsGrid > .percentage").text(e["5"].percentage),$("#sixLetterAchievementsGrid > .ratio").text(e["6"].ratio),$("#sixLetterAchievementsGrid > .percentage").text(e["6"].percentage),$("#sevenLetterAchievementsGrid > .ratio").text(e["7"].ratio),$("#sevenLetterAchievementsGrid > .percentage").text(e["7"].percentage),$("#miscellaneousAchievementsGrid > .ratio").text(e.Miscellaneous.ratio),$("#miscellaneousAchievementsGrid > .percentage").text(e.Miscellaneous.percentage);var a=e["5"].numAchievements+e["6"].numAchievements+e["7"].numAchievements+e.Miscellaneous.numAchievements,c=e["5"].numAchievementsCompleted+e["6"].numAchievementsCompleted+e["7"].numAchievementsCompleted+e.Miscellaneous.numAchievementsCompleted,o=(100*(c/a)).toFixed(1);"100.0"==o&&(o="100"),$("#allAchievementsGrid > .ratio").text(c+"/"+a),$("#allAchievementsGrid > .percentage").text(o+"%")}WinJS.UI.Pages.define("/pages/statsHub/statsHub.html",{ready:function(){RC.assert("object"==typeof RC.HighScores.dictionary,"High scores dictionary should already be defined"),RC.assert("object"==typeof RC.Achievements.dictionary,"Achievements dictionary should already be defined"),e();var t=WinJS.Class.derive(WinJS.UI.VirtualizedDataSource,function(){this._baseDataSourceConstructor(new r)});n(),WinJS.Namespace.defineWithParent(RC,"Stats",{highScoresDataSource:new t})},unload:function(){t()},updateLayout:function(){}});var r=WinJS.Class.define(function(){this._maxNumHighScoresToShow=10,this._numHighScores=void 0},{itemsFromIndex:function(e,t,i){RC.assert("object"==typeof RC.HighScores.dictionary,"High scores dictionary should already be defined"),RC.assert("number"==typeof this._numHighScores,"Number of high scores should be defined in getCount()");var n=this;return new WinJS.Promise(function(i){var r=RC.HighScores.dictionary,s=[];for(var o in r)s=s.concat(r[o]);s.sort(function(e,t){return t.score-e.score}),s=s.slice(0,n._maxNumHighScoresToShow);for(var a=[],c=e-t;c<s.length;++c){var h=s[c];h.isPlaceholder=!1,a.push({key:c.toString(),data:h})}return i({items:a,offset:t,totalCount:a.length})})},getCount:function(){RC.assert("object"==typeof RC.HighScores.dictionary,"High scores dictionary should already be defined");var e=this;return new WinJS.Promise(function(t){var i=RC.HighScores.dictionary;e._numHighScores=0;for(var n in i)e._numHighScores+=i[n].length;t(Math.min(e._numHighScores,e._maxNumHighScoresToShow))})}})}();