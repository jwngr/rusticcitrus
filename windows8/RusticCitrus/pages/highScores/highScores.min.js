!function(){"use strict";function e(e){RC.assert("object"==typeof RC.HighScores,"HighScores namespace should already be defined"),RC.assert("undefined"==typeof RC.HighScores.dictionary,"High scores dictionary should be undefined"),Windows.Storage.ApplicationData.current.localFolder.getFileAsync("scores.txt").then(function(e){return Windows.Storage.FileIO.readTextAsync(e)}).done(function(n){RC.assert("string"==typeof n&&""!=n,"High scores text file should not be empty"),WinJS.Namespace.defineWithParent(RC,"HighScores",{dictionary:$.parseJSON(n)}),e&&e()},function(){t()})}function n(e){var n=RC.HighScores.dictionary,o=[];for(var t in n){var r=n[t],s=r.length;if(0==s)o=o.concat({numLetters:parseInt(t),isPlaceholder:!0});else{for(var d=0;s>d;++d){var u=r[d];void 0===u.dateCreated&&(u.dateCreated=(new Date).toString()),u.isPlaceholder=!1}o=o.concat(r.slice(0,10))}}o=new WinJS.Binding.List(o);var a=o.createGrouped(function(e){return e.numLetters},function(e){return{title:e.numLetters+" Letters"}},function(e,n){return e-n});WinJS.Namespace.defineWithParent(RC,"HighScores",{groupedList:a}),e&&e()}function o(){var e=$("#highScoresListView")[0].winControl;e.itemDataSource=RC.HighScores.groupedList.dataSource,e.groupDataSource=RC.HighScores.groupedList.groups.dataSource}function t(){Windows.Storage.ApplicationData.current.localFolder.createFileAsync("scores.txt",Windows.Storage.CreationCollisionOption.replaceExisting).then(function(e){var n={5:[],6:[],7:[]};return RC.debug&&r(n),Windows.Storage.FileIO.writeTextAsync(e,JSON.stringify(n))}).done(function(){e()})}function r(e){RC.debug||console.error("This is a debug only function and should not be called when debug is set to false."),e["5"]=[{score:18340,numLetters:5,numRoundsCompleted:14,numWordsFound:280,dateCreated:"Mon Sep 16 20:00:00 PDT 2013"},{score:13200,numLetters:5,numRoundsCompleted:12,numWordsFound:197,dateCreated:"Wed Sep 18 22:00:00 PDT 2013"},{score:8920,numLetters:5,numRoundsCompleted:9,numWordsFound:141,dateCreated:"Mon Sep 16 10:54:00 PDT 2013"},{score:1800,numLetters:5,numRoundsCompleted:4,numWordsFound:50,dateCreated:"Mon Sep 16 20:43:00 PDT 2013"},{score:1270,numLetters:5,numRoundsCompleted:3,numWordsFound:43,dateCreated:"Mon Sep 16 20:00:00 PDT 2013"},{score:670,numLetters:5,numRoundsCompleted:2,numWordsFound:17,dateCreated:"Sun Sep 15 21:00:00 PDT 2013"},{score:670,numLetters:5,numRoundsCompleted:1,numWordsFound:25,dateCreated:"Mon Sep 16 20:00:00 PDT 2013"},{score:670,numLetters:5,numRoundsCompleted:2,numWordsFound:15,dateCreated:"Mon Sep 16 12:00:00 PDT 2013"},{score:550,numLetters:5,numRoundsCompleted:1,numWordsFound:18,dateCreated:"Mon Sep 16 09:00:00 PDT 2013"},{score:30,numLetters:5,numRoundsCompleted:0,numWordsFound:1,dateCreated:"Mon Sep 16 07:09:00 PDT 2013"},{score:0,numLetters:5,numRoundsCompleted:0,numWordsFound:0,dateCreated:"Mon Sep 16 07:09:00 PDT 2013"}],e["6"]=[{score:20670,numLetters:6,numRoundsCompleted:16,numWordsFound:340,dateCreated:"Mon Sep 16 20:02:00 PDT 2013"},{score:13450,numLetters:6,numRoundsCompleted:12,numWordsFound:202,dateCreated:"Mon Sep 16 05:02:01 PDT 2013"},{score:13430,numLetters:6,numRoundsCompleted:11,numWordsFound:180,dateCreated:"Mon Sep 16 20:01:10 PDT 2013"},{score:11890,numLetters:6,numRoundsCompleted:10,numWordsFound:170,dateCreated:"Mon Sep 16 03:01:55 PDT 2013"},{score:8770,numLetters:6,numRoundsCompleted:8,numWordsFound:132,dateCreated:"Mon Sep 16 20:03:02 PDT 2013"},{score:7880,numLetters:6,numRoundsCompleted:6,numWordsFound:126,dateCreated:"Mon Sep 16 02:20:30 PDT 2013"},{score:800,numLetters:6,numRoundsCompleted:2,numWordsFound:18,dateCreated:"Mon Sep 16 20:03:00 PDT 2013"},{score:460,numLetters:6,numRoundsCompleted:1,numWordsFound:8,dateCreated:"Mon Sep 16 10:00:03 PDT 2013"}],e["7"]=[{score:18280,numLetters:7,numRoundsCompleted:14,numWordsFound:282,dateCreated:"Mon Sep 16 10:00:50 PDT 2013"},{score:10250,numLetters:7,numRoundsCompleted:8,numWordsFound:165,dateCreated:"Mon Sep 16 22:00:00 PDT 2013"},{score:4120,numLetters:7,numRoundsCompleted:5,numWordsFound:79,dateCreated:"Mon Sep 16 21:00:55 PDT 2013"},{score:2410,numLetters:7,numRoundsCompleted:6,numWordsFound:56,dateCreated:"Mon Sep 16 20:04:00 PDT 2013"},{score:300,numLetters:7,numRoundsCompleted:1,numWordsFound:7,dateCreated:"Mon Sep 16 22:40:00 PDT 2013"},{score:0,numLetters:7,numRoundsCompleted:0,numWordsFound:0,dateCreated:"Mon Sep 16 20:00:32 PDT 2013"}]}function s(e){RC.assert("object"==typeof e,"newScore is not an object"),RC.assert("number"==typeof e.score,"score is not a number"),RC.assert("number"==typeof e.numLetters,"numLetters is not a number"),RC.assert("number"==typeof e.numRoundsCompleted,"numRoundsCompleted is not a number"),RC.assert("number"==typeof e.numWordsFound,"numWordsFound is not a number"),RC.assert("string"==typeof e.dateCreated,"dateCreated is not a string");var o=RC.HighScores.dictionary,t=o[e.numLetters.toString()];RC.assert("object"==typeof t,"High scores list for "+e.numLetters+" letters is not defined"),t.push(e),t.sort(function(e,n){return n.score-e.score}),n(),u()}function d(){var e=RC.HighScores.dictionary;for(var o in e)e[o]=[];n(),u()}function u(e){Windows.Storage.ApplicationData.current.localFolder.createFileAsync("scores.txt",Windows.Storage.CreationCollisionOption.replaceExisting).then(function(e){return Windows.Storage.FileIO.writeTextAsync(e,JSON.stringify(RC.HighScores.dictionary))}).done(function(){e&&e()})}function a(e){RC.debug||console.error("This is a debug only function and should not be called when debug is set to false."),Windows.Storage.ApplicationData.current.localFolder.getFileAsync("scores.txt").done(function(n){n.deleteAsync().done(function(){e&&e()},function(e){RC.assert(!1,"scores.txt not removed: "+e)})},function(){console.warn("scores.txt has already been deleted."),e&&e()})}WinJS.UI.Pages.define("/pages/highScores/highScores.html",{ready:function(){void 0===RC.HighScores.dictionary?e(function(){n(o)}):void 0===RC.HighScores.groupedList?n(o):o()},unload:function(){},updateLayout:function(){}}),WinJS.Namespace.defineWithParent(RC,"HighScores",{load:e,reset:d,insertNewScore:s,deleteFile_DEBUG:a})}();