!function(){"use strict";function e(){$("#gameBoard img").on("dragstart",function(e){e.preventDefault()}),$("#pauseMenu #resumeGameButton").on("click",function(){RC.currentGame.currentRound.resume("pauseMenu")}),$("#pauseMenu #pauseMenuSaveAndExitButton").on("click",function(){RC.licenseInformation.isTrial?RC.MessageDialogs.displayAppPurchaseDialog("Upgrade to the full verison","Only the full version of Rustic Citrus allows you to save and exit games. It also gives you features like 7-letter games, high scores, and achievements. Get the full juicy version of Rustic Citrus now!",!0):s()}),$("#endRoundMenu #endRoundMenuCancelButton").on("click",function(){RC.currentGame.currentRound.resume("endRoundMenu")}),$("#endRoundMenu #endRoundMenuConfirmButton").on("click",function(){RC.currentGame.currentRound.secondsRemaining=0,RC.currentGame.currentRound.endRound()}),$("#gameOverMenu .exitButton").on("click",i),$("#nextRoundMenu #nextRoundButton").on("click",function(){$("#nextRoundMenu").fadeOut(400,o)}),$("#nextRoundMenu #nextRoundMenuSaveAndExitButton").on("click",function(){RC.licenseInformation.isTrial?RC.MessageDialogs.displayAppPurchaseDialog("Upgrade to the full verison","Only the full version of Rustic Citrus allows you to save and exit a game. It also gives you features like 7-letter games, high scores, and achievements. Get the full juicy version of Rustic Citrus now!",!0):s()}),$("#gameBoard").on({mouseenter:function(){var e=1.1;"pauseGameButton"==this.id&&(e=1.2),$(this).transition({scale:e,duration:150,easing:"ease",queue:!1})},mouseleave:function(){$(this).transition({scale:1,duration:150,easing:"ease",queue:!1})},mousedown:function(){$(this).transition({scale:.9,duration:100,easing:"ease",queue:!1})}},".gameBoardButton")}function n(){$("#gameBoard img").off("dragstart"),$("#pauseMenu #resumeGameButton").off("click"),$("#pauseMenu #pauseMenuSaveAndExitButton").off("click"),$("#endRoundMenu #endRoundMenuCancelButton").off("click"),$("#endRoundMenu #endRoundMenuConfirmButton").off("click"),$("#gameOverMenu .exitButton").off("click"),$("#nextRoundMenu #nextRoundButton").off("click"),$("#nextRoundMenu #nextRoundMenuSaveAndExitButton").off("click"),$("#gameBoard").off("mouseenter"),$("#gameBoard").off("mouseleave"),$("#gameBoard").off("mousedown")}function u(e){$("#gameBoard").hide(1,function(){d.subsetWords.clear(),d.availableLetters.clear(),$("#round").text(""),$("#score").text(""),$("#timeRemaining").text(""),RC.currentGame.currentRound.subsetWords=null,RC.currentGame.currentRound.letters=null,RC.currentGame.currentRound.previousGuess=null,RC.currentGame.currentRound.game=null,RC.currentGame.currentRound=null,e&&e()})}function t(e){RC.currentGame=new RC.Classes.SinglePlayerGame(d,e),RC.currentGame.createRound(RC.defaultRoundLengthInSeconds),RC.currentGame.saveToFirebase(!1)}function a(e){var n=e.game;RC.currentGame=new RC.Classes.SinglePlayerGame(d,n.numLetters,n),n.startNewRound?RC.currentGame.createRound(RC.defaultRoundLengthInSeconds):RC.currentGame.createRound(n.currentRound.secondsRemaining,{word:n.currentRound.word,foundWords:n.currentRound.foundWords,startRoundPaused:void 0===e.startRoundPaused?!1:e.startRoundPaused,startRoundDone:void 0===e.startRoundDone?!1:e.startRoundDone}),RC.SinglePlayerGames.list[n.numLetters-RC.smallestNumLetters]={numLetters:n.numLetters}}function o(){u(function(){RC.currentGame.createRound(RC.defaultRoundLengthInSeconds)})}function r(e){RC.currentGame=new RC.Classes.MultiplayerGame(d,e),RC.currentGame.createRound(e.currentRound)}function s(){var e=RC.currentGame,n=e.currentRound;e.saveToFirebase(!1),RC.SinglePlayerGames.list[e.numLetters-RC.smallestNumLetters]={score:e.score,numLetters:e.numLetters,numRoundsCompleted:e.numRoundsCompleted,numWordsFound:e.numWordsFound,pastRoundWords:e.pastRoundWords,numConsecutivePerfectRounds:e.numConsecutivePerfectRounds,dateCreated:e.dateCreated,dateModified:(new Date).toString(),currentRound:{word:n.word,secondsRemaining:n.secondsRemaining,foundWords:n.foundWords},startNewRound:0===n.secondsRemaining||n.foundWords.length===n.subsetWords.length},RC.SinglePlayerGames.dataSource.invalidateAll(),RC.SinglePlayerGames.updateFile(),i()}function i(){u(function(){WinJS.Navigation.back(1)})}var d;WinJS.UI.Pages.define("/pages/gameBoard/gameBoard.html",{ready:function(n,u){e(),RC.Music.musicOn&&(RC.Music.mainMenuMusic.pause(),RC.Music.gameBoardMusic.currentTime=0,RC.Music.gameBoardMusic.play()),$("#loginContainer").hide(),d={subsetWords:Raphael("subsetWordsPaper",0,0),availableLetters:Raphael("availableLettersPaper",900,window.innerHeight)},RC.currentGame=null,RC.assert("multiplayer"===u.gameType||"singlePlayer"===u.gameType,'gameType must be "singlePlayer" or "multiplayer"'),"multiplayer"===u.gameType?r(u.game):u.resumeGame?a(u):t(u.numLetters)},unload:function(){n(),d.subsetWords.remove(),d.availableLetters.remove(),d=null,RC.currentGame.currentRound=null,RC.currentGame=null,RC.Music.musicOn&&(RC.Music.mainMenuMusic.currentTime=0,RC.Music.mainMenuMusic.play(),RC.Music.gameBoardMusic.pause()),$("#loginContainer").show()},updateLayout:function(e,n){n==Windows.UI.ViewManagement.ApplicationViewState.fullScreenLandscape||RC.currentGame.currentRound.isPaused?RC.currentGame.currentRound.isOver&&RC.Music.musicOn&&(n==Windows.UI.ViewManagement.ApplicationViewState.fullScreenLandscape?RC.Music.gameBoardMusic.play():RC.Music.gameBoardMusic.pause()):RC.currentGame.currentRound.pause()}})}();