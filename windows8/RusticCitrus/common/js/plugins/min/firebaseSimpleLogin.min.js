!function(){var COMPILED=!0,goog=goog||{};goog.global=this,goog.DEBUG=!0,goog.LOCALE="en",goog.provide=function(e){if(!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e];for(var t=e;(t=t.substring(0,t.lastIndexOf(".")))&&!goog.getObjectByName(t);)goog.implicitNamespaces_[t]=!0}goog.exportPath_(e)},goog.setTestOnly=function(e){if(COMPILED&&!goog.DEBUG)throw e=e||"",Error(": "+e)},COMPILED||(goog.isProvided_=function(e){return!goog.implicitNamespaces_[e]&&!!goog.getObjectByName(e)},goog.implicitNamespaces_={}),goog.exportPath_=function(e,t,o){e=e.split("."),o=o||goog.global,!(e[0]in o)&&o.execScript&&o.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)!e.length&&goog.isDef(t)?o[i]=t:o=o[i]?o[i]:o[i]={}},goog.getObjectByName=function(e,t){for(var o,i=e.split("."),r=t||goog.global;o=i.shift();){if(!goog.isDefAndNotNull(r[o]))return null;r=r[o]}return r},goog.globalize=function(e,t){var o,i=t||goog.global;for(o in e)i[o]=e[o]},goog.addDependency=function(e,t,o){if(!COMPILED){for(var i,e=e.replace(/\\/g,"/"),r=goog.dependencies_,n=0;i=t[n];n++)r.nameToPath[i]=e,e in r.pathToNames||(r.pathToNames[e]={}),r.pathToNames[e][i]=!0;for(i=0;t=o[i];i++)e in r.requires||(r.requires[e]={}),r.requires[e][t]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.require=function(e){if(!COMPILED&&!goog.isProvided_(e)){if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.included_[t]=!0,goog.writeScripts_(),void 0}throw e="goog.require could not find: "+e,goog.global.console&&goog.global.console.error(e),Error(e)}},goog.basePath="",goog.nullFunction=function(){},goog.identityFunction=function(e){return e},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return"undefined"!=typeof e&&"write"in e},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("script"),t=e.length-1;t>=0;--t){var o=e[t].src,i=o.lastIndexOf("?"),i=-1==i?o.length:i;if("base.js"==o.substr(i-7,7)){goog.basePath=o.substr(0,i-7);break}}},goog.importScript_=function(e){var t=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[e]&&t(e)&&(goog.dependencies_.written[e]=!0)},goog.writeScriptTag_=function(e){return goog.inHtmlDocument_()?(goog.global.document.write('<script type="text/javascript" src="'+e+'"></script>'),!0):!1},goog.writeScripts_=function(){function e(t){if(!(t in r.written)){if(!(t in r.visited)&&(r.visited[t]=!0,t in r.requires))for(var n in r.requires[t])if(!goog.isProvided_(n)){if(!(n in r.nameToPath))throw Error("Undefined nameToPath for "+n);e(r.nameToPath[n])}t in i||(i[t]=!0,o.push(t))}}var t,o=[],i={},r=goog.dependencies_;for(t in goog.included_)r.written[t]||e(t);for(t=0;t<o.length;t++){if(!o[t])throw Error("Undefined script input");goog.importScript_(goog.basePath+o[t])}},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var o=Object.prototype.toString.call(e);if("[object Window]"==o)return"object";if("[object Array]"==o||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==o||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},goog.isDef=function(e){return void 0!==e},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var o,t="array"==t?[]:{};for(o in e)t[o]=goog.cloneObject(e[o]);return t}return e},goog.bindNative_=function(e){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t){if(!e)throw Error();if(arguments.length>2){var o=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,o),e.apply(t,i)}}return function(){return e.apply(t,arguments)}},goog.bind=function(){return goog.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bindNative_:goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=Array.prototype.slice.call(arguments);return o.unshift.apply(o,t),e.apply(this,o)}},goog.mixin=function(e,t){for(var o in t)e[o]=t[o]},goog.now=Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,o=t.createElement("script");o.type="text/javascript",o.defer=!1,o.appendChild(t.createTextNode(e)),t.body.appendChild(o),t.body.removeChild(o)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){var o=function(e){return goog.cssNameMapping_[e]||e},i=function(e){for(var e=e.split("-"),t=[],i=0;i<e.length;i++)t.push(o(e[i]));return t.join("-")},i=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:i:function(e){return e};return t?e+"-"+i(t):i(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){var o,i=t||{};for(o in i)var r=(""+i[o]).replace(/\$/g,"$$$$"),e=e.replace(RegExp("\\{\\$"+o+"\\}","gi"),r);return e},goog.exportSymbol=function(e,t,o){goog.exportPath_(e,t,o)},goog.exportProperty=function(e,t,o){e[t]=o},goog.inherits=function(e,t){function o(){}o.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new o,e.prototype.constructor=e},goog.base=function(e,t){var o=arguments.callee.caller;if(o.superClass_)return o.superClass_.constructor.apply(e,Array.prototype.slice.call(arguments,1));for(var i=Array.prototype.slice.call(arguments,2),r=!1,n=e.constructor;n;n=n.superClass_&&n.superClass_.constructor)if(n.prototype[t]===o)r=!0;else if(r)return n.prototype[t].apply(e,i);if(e[t]===o)return e.constructor.prototype[t].apply(e,i);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)};var fb={util:{}};fb.util.validation={},fb.util.validation.validateArgCount=function(e,t,o,i){var r;if(t>i?r="at least "+t:i>o&&(r=0===o?"none":"no more than "+o),r)throw Error(e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")},fb.util.validation.errorPrefix_=function(e,t,o){var i="";switch(t){case 1:i=o?"first":"First";break;case 2:i=o?"second":"Second";break;case 3:i=o?"third":"Third";break;case 4:i=o?"fourth":"Fourth";break;default:fb.core.util.validation.assert(!1,"errorPrefix_ called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+(i+" argument ")},fb.util.validation.validateNamespace=function(e,t,o,i){if((!i||goog.isDef(o))&&!goog.isString(o))throw Error(fb.util.validation.errorPrefix_(e,t,i)+"must be a valid firebase namespace.")},fb.util.validation.validateCallback=function(e,t,o,i){if((!i||goog.isDef(o))&&!goog.isFunction(o))throw Error(fb.util.validation.errorPrefix_(e,t,i)+"must be a valid function.")},fb.util.validation.validateString=function(e,t,o,i){if((!i||goog.isDef(o))&&!goog.isString(o))throw Error(fb.util.validation.errorPrefix_(e,t,i)+"must be a valid string.")},fb.util.validation.validateContextObject=function(e,t,o,i){if(!(i&&!goog.isDef(o)||goog.isObject(o)&&null!==o))throw Error(fb.util.validation.errorPrefix_(e,t,i)+"must be a valid context object.")},fb.simplelogin={},fb.simplelogin.persona={},fb.simplelogin.persona.login=function(e){navigator.id.watch({onlogin:function(t){e(t)},onlogout:function(){}}),navigator.id.request({oncancel:function(){e(null)}})},fb.constants={};var NODE_CLIENT=!1;goog.json={},goog.json.isValid_=function(e){return/^\s*$/.test(e)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))},goog.json.parse=function(a){if(a=String(a),goog.json.isValid_(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)},goog.json.unsafeParse=function(a){return eval("("+a+")")},goog.json.serialize=function(e,t){return new goog.json.Serializer(t).serialize(e)},goog.json.Serializer=function(e){this.replacer_=e},goog.json.Serializer.prototype.serialize=function(e){var t=[];return this.serialize_(e,t),t.join("")},goog.json.Serializer.prototype.serialize_=function(e,t){switch(typeof e){case"string":this.serializeString_(e,t);break;case"number":this.serializeNumber_(e,t);break;case"boolean":t.push(e);break;case"undefined":t.push("null");break;case"object":if(null==e){t.push("null");break}if(goog.isArray(e)){this.serializeArray(e,t);break}this.serializeObject_(e,t);break;case"function":break;default:throw Error("Unknown type: "+typeof e)}},goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},goog.json.Serializer.charsToReplace_=/\uffff/.test("ï¿¿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,goog.json.Serializer.prototype.serializeString_=function(e,t){t.push('"',e.replace(goog.json.Serializer.charsToReplace_,function(e){if(e in goog.json.Serializer.charToJsonCharCache_)return goog.json.Serializer.charToJsonCharCache_[e];var t=e.charCodeAt(0),o="\\u";return 16>t?o+="000":256>t?o+="00":4096>t&&(o+="0"),goog.json.Serializer.charToJsonCharCache_[e]=o+t.toString(16)}),'"')},goog.json.Serializer.prototype.serializeNumber_=function(e,t){t.push(isFinite(e)&&!isNaN(e)?e:"null")},goog.json.Serializer.prototype.serializeArray=function(e,t){var o=e.length;t.push("[");for(var i="",r=0;o>r;r++)t.push(i),i=e[r],this.serialize_(this.replacer_?this.replacer_.call(e,String(r),i):i,t),i=",";t.push("]")},goog.json.Serializer.prototype.serializeObject_=function(e,t){t.push("{");var o,i="";for(o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=e[o];"function"!=typeof r&&(t.push(i),this.serializeString_(o,t),t.push(":"),this.serialize_(this.replacer_?this.replacer_.call(e,o,r):r,t),i=",")}t.push("}")},fb.util.json={},fb.util.json.eval=function(e){return"undefined"!=typeof JSON&&goog.isDef(JSON.parse)?JSON.parse(e):goog.json.parse(e)},fb.util.json.stringify=function(e){return"undefined"!=typeof JSON&&goog.isDef(JSON.stringify)?JSON.stringify(e):goog.json.serialize(e)},fb.simplelogin.validation={};var VALID_EMAIL_REGEX_=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;fb.simplelogin.validation.isValidEmail=function(e){return goog.isString(e)&&VALID_EMAIL_REGEX_.test(e)},fb.simplelogin.validation.isValidPassword=function(e){return goog.isString(e)},fb.simplelogin.validation.validateUser=function(e,t,o,i){if((!i||goog.isDef(o))&&!fb.simplelogin.validation.isValidEmail(o))throw Error(fb.util.validation.errorPrefix_(e,t,i)+"must be a valid email address.")},fb.simplelogin.validation.validatePassword=function(e,t,o,i){if((!i||goog.isDef(o))&&!fb.simplelogin.validation.isValidPassword(o))throw Error(fb.util.validation.errorPrefix_(e,t,i)+"must be a valid password.")},fb.simplelogin.winchan=function(){function e(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener&&e.addEventListener(t,o,!1)}function t(e,t,o){e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener&&e.removeEventListener(t,o,!1)}function o(e){/^https?:\/\//.test(e)||(e=window.location.href);var t=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(e);return t?t[1]:e}var i,r="die",n=-1,a=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){var s=/MSIE ([0-9]{1,}[\.0-9]{0,})/;(a=a.match(s))&&1<a.length&&(n=parseFloat(a[1]))}else-1<a.indexOf("Trident")&&(s=/rv:([0-9]{2,2}[\.0-9]{0,})/,(a=a.match(s))&&1<a.length&&(n=parseFloat(a[1])));return i=n>=8,fb.util.json&&fb.util.json.eval&&fb.util.json.stringify&&window.postMessage?{open:function(n,a){function s(){if(p&&document.body.removeChild(p),p=void 0,b&&(b=clearInterval(b)),t(window,"message",l),t(window,"unload",s),m)try{m.close()}catch(e){h.postMessage(r,d)}m=h=void 0}function l(e){if(e.origin===d)try{var t=fb.util.json.eval(e.data);"ready"===t.a?h.postMessage(v,d):"error"===t.a?(s(),a&&(a(t.d),a=null)):"response"===t.a&&(s(),a&&(a(null,t.d),a=null))}catch(o){}}if(!a)throw"missing required callback argument";var c;n.url||(c="missing required 'url' parameter"),n.relay_url||(c="missing required 'relay_url' parameter"),c&&setTimeout(function(){a(c)},0),n.window_name||(n.window_name=null);var g;if(!(g=!n.window_features))e:{try{var u=navigator.userAgent;g=-1!=u.indexOf("Fennec/")||-1!=u.indexOf("Firefox/")&&-1!=u.indexOf("Android");break e}catch(f){}g=!1}g&&(n.window_features=void 0);var p,d=o(n.url);if(d!==o(n.relay_url))return setTimeout(function(){a("invalid arguments: origin of url and relay_url must match")},0);var h;i&&(p=document.createElement("iframe"),p.setAttribute("src",n.relay_url),p.style.display="none",p.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(p),h=p.contentWindow);var m=window.open(n.url,n.window_name,n.window_features);h||(h=m);var b=setInterval(function(){m&&m.closed&&(s(),a&&(a("unknown closed window"),a=null))},500),v=fb.util.json.stringify({a:"request",d:n.params});return e(window,"unload",s),e(window,"message",l),{close:s,focus:function(){if(m)try{m.focus()}catch(e){}}}},onOpen:function(o){function n(e){e=fb.util.json.stringify(e),i?d.doPost(e,c):d.postMessage(e,c)}function a(e){var i;try{i=fb.util.json.eval(e.data)}catch(r){}i&&"request"===i.a&&(t(window,"message",a),c=e.origin,o&&setTimeout(function(){o(c,i.d,function(e){o=void 0,n({a:"response",d:e})})},0))}function s(e){if(e.data===r)try{window.close()}catch(t){}}var l,c="*";if(i)e:{for(var g=window.location,u=window.opener.frames,g=g.protocol+"//"+g.host,f=u.length-1;f>=0;f--)try{if(0===u[f].location.href.indexOf(g)&&"__winchan_relay_frame"===u[f].name){l=u[f];break e}}catch(p){}l=void 0}else l=window.opener;var d=l;if(!d)throw"can't find relay frame";e(i?d:window,"message",a),e(i?d:window,"message",s);try{n({a:"ready"})}catch(h){e(d,"load",function(){n({a:"ready"})})}var m=function(){try{t(i?d:window,"message",s)}catch(e){}o&&n({a:"error",d:"client closed window"}),o=void 0;try{window.close()}catch(r){}};return e(window,"unload",m),{detach:function(){t(window,"unload",m)}}}}:{open:function(e,t,o,i){setTimeout(function(){i("unsupported browser")},0)},onOpen:function(e){setTimeout(function(){e("unsupported browser")},0)}}}(),fb.util.sjcl={};var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};"undefined"!=typeof module&&module.exports&&(module.exports=sjcl),sjcl.cipher.aes=function(e){this.h[0][0][0]||this.w();var t,o,i,r,n=this.h[0][4],a=this.h[1];t=e.length;var s=1;if(4!==t&&6!==t&&8!==t)throw new sjcl.exception.invalid("invalid aes key size");for(this.a=[i=e.slice(0),r=[]],e=t;4*t+28>e;e++)o=i[e-1],(0===e%t||8===t&&4===e%t)&&(o=n[o>>>24]<<24^n[255&o>>16]<<16^n[255&o>>8]<<8^n[255&o],0===e%t&&(o=o<<8^o>>>24^s<<24,s=s<<1^283*(s>>7))),i[e]=i[e-t]^o;for(t=0;e;t++,e--)o=i[3&t?e:e-4],r[t]=4>=e||4>t?o:a[0][n[o>>>24]]^a[1][n[255&o>>16]]^a[2][n[255&o>>8]]^a[3][n[255&o]]},sjcl.cipher.aes.prototype={encrypt:function(e){return this.G(e,0)},decrypt:function(e){return this.G(e,1)},h:[[[],[],[],[],[]],[[],[],[],[],[]]],w:function(){var e,t,o,i,r,n,a,s=this.h[0],l=this.h[1],c=s[4],g=l[4],u=[],f=[];for(e=0;256>e;e++)f[(u[e]=e<<1^283*(e>>7))^e]=e;for(t=o=0;!c[t];t^=i||1,o=f[o]||1)for(n=o^o<<1^o<<2^o<<3^o<<4,n=99^(n>>8^255&n),c[t]=n,g[n]=t,r=u[e=u[i=u[t]]],a=16843009*r^65537*e^257*i^16843008*t,r=257*u[n]^16843008*n,e=0;4>e;e++)s[e][t]=r=r<<24^r>>>8,l[e][n]=a=a<<24^a>>>8;for(e=0;5>e;e++)s[e]=s[e].slice(0),l[e]=l[e].slice(0)},G:function(e,t){if(4!==e.length)throw new sjcl.exception.invalid("invalid aes block size");var o,i,r,n,a=this.a[t],s=e[0]^a[0],l=e[t?3:1]^a[1],c=e[2]^a[2],e=e[t?1:3]^a[3],g=a.length/4-2,u=4,f=[0,0,0,0];o=this.h[t];var p=o[0],d=o[1],h=o[2],m=o[3],b=o[4];for(n=0;g>n;n++)o=p[s>>>24]^d[255&l>>16]^h[255&c>>8]^m[255&e]^a[u],i=p[l>>>24]^d[255&c>>16]^h[255&e>>8]^m[255&s]^a[u+1],r=p[c>>>24]^d[255&e>>16]^h[255&s>>8]^m[255&l]^a[u+2],e=p[e>>>24]^d[255&s>>16]^h[255&l>>8]^m[255&c]^a[u+3],u+=4,s=o,l=i,c=r;for(n=0;4>n;n++)f[t?3&-n:n]=b[s>>>24]<<24^b[255&l>>16]<<16^b[255&c>>8]<<8^b[255&e]^a[u++],o=s,s=l,l=c,c=e,e=o;return f}},sjcl.bitArray={bitSlice:function(e,t,o){return e=sjcl.bitArray.N(e.slice(t/32),32-(31&t)).slice(1),void 0===o?e:sjcl.bitArray.clamp(e,o-t)},extract:function(e,t,o){var i=Math.floor(31&-t-o);return(-32&(t+o-1^t)?e[0|t/32]<<32-i^e[0|t/32+1]>>>i:e[0|t/32]>>>i)&(1<<o)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var o=e[e.length-1],i=sjcl.bitArray.getPartial(o);return 32===i?e.concat(t):sjcl.bitArray.N(t,i,0|o,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;return 0===t?0:32*(t-1)+sjcl.bitArray.getPartial(e[t-1])},clamp:function(e,t){if(32*e.length<t)return e;var e=e.slice(0,Math.ceil(t/32)),o=e.length,t=31&t;return o>0&&t&&(e[o-1]=sjcl.bitArray.partial(t,e[o-1]&2147483648>>t-1,1)),e},partial:function(e,t,o){return 32===e?t:(o?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(sjcl.bitArray.bitLength(e)!==sjcl.bitArray.bitLength(t))return!1;var o,i=0;for(o=0;o<e.length;o++)i|=e[o]^t[o];return 0===i},N:function(e,t,o,i){var r;for(void 0===i&&(i=[]);t>=32;t-=32)i.push(o),o=0;if(0===t)return i.concat(e);for(r=0;r<e.length;r++)i.push(o|e[r]>>>t),o=e[r]<<32-t;return r=e.length?e[e.length-1]:0,e=sjcl.bitArray.getPartial(r),i.push(sjcl.bitArray.partial(31&t+e,t+e>32?o:i.pop(),1)),i},O:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]}},sjcl.codec.utf8String={fromBits:function(e){var t,o,i="",r=sjcl.bitArray.bitLength(e);for(t=0;r/8>t;t++)0===(3&t)&&(o=e[t/4]),i+=String.fromCharCode(o>>>24),o<<=8;return decodeURIComponent(escape(i))},toBits:function(e){var t,e=unescape(encodeURIComponent(e)),o=[],i=0;for(t=0;t<e.length;t++)i=i<<8|e.charCodeAt(t),3===(3&t)&&(o.push(i),i=0);return 3&t&&o.push(sjcl.bitArray.partial(8*(3&t),i)),o}},sjcl.codec.base64={C:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,o){var i="",r=0,n=sjcl.codec.base64.C,a=0,s=sjcl.bitArray.bitLength(e);for(o&&(n=n.substr(0,62)+"-_"),o=0;6*i.length<s;)i+=n.charAt((a^e[o]>>>r)>>>26),6>r?(a=e[o]<<6-r,r+=26,o++):(a<<=6,r-=6);for(;3&i.length&&!t;)i+="=";return i},toBits:function(e,t){var o,e=e.replace(/\s|=/g,""),i=[],r=0,n=sjcl.codec.base64.C,a=0;for(t&&(n=n.substr(0,62)+"-_"),t=0;t<e.length;t++){if(o=n.indexOf(e.charAt(t)),0>o)throw new sjcl.exception.invalid("this isn't base64!");r>26?(r-=26,i.push(a^o>>>r),a=o<<32-r):(r+=6,a^=o<<32-r)}return 56&r&&i.push(sjcl.bitArray.partial(56&r,a,1)),i}},sjcl.codec.base64url={fromBits:function(e){return sjcl.codec.base64.fromBits(e,1,1)},toBits:function(e){return sjcl.codec.base64.toBits(e,1)}},sjcl.hash.sha256=function(e){this.a[0]||this.w(),e?(this.m=e.m.slice(0),this.i=e.i.slice(0),this.e=e.e):this.reset()},sjcl.hash.sha256.hash=function(e){return(new sjcl.hash.sha256).update(e).finalize()},sjcl.hash.sha256.prototype={blockSize:512,reset:function(){return this.m=this.L.slice(0),this.i=[],this.e=0,this},update:function(e){"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e));var t,o=this.i=sjcl.bitArray.concat(this.i,e);for(t=this.e,e=this.e=t+sjcl.bitArray.bitLength(e),t=-512&512+t;e>=t;t+=512)this.B(o.splice(0,16));return this},finalize:function(){var e,t=this.i,o=this.m,t=sjcl.bitArray.concat(t,[sjcl.bitArray.partial(1,1)]);for(e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this.e/4294967296)),t.push(0|this.e);t.length;)this.B(t.splice(0,16));return this.reset(),o},L:[],a:[],w:function(){function e(e){return 0|4294967296*(e-Math.floor(e))}var t,o=0,i=2;e:for(;64>o;i++){for(t=2;i>=t*t;t++)if(0===i%t)continue e;8>o&&(this.L[o]=e(Math.pow(i,.5))),this.a[o]=e(Math.pow(i,1/3)),o++}},B:function(e){for(var t,o,i=e.slice(0),r=this.m,n=this.a,a=r[0],s=r[1],l=r[2],c=r[3],g=r[4],u=r[5],f=r[6],p=r[7],e=0;64>e;e++)16>e?t=i[e]:(t=i[15&e+1],o=i[15&e+14],t=i[15&e]=0|(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+i[15&e]+i[15&e+9]),t=t+p+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(f^g&(u^f))+n[e],p=f,f=u,u=g,g=0|c+t,c=l,l=s,s=a,a=0|t+(s&l^c&(s^l))+(s>>>2^s>>>13^s>>>22^s<<30^s<<19^s<<10);r[0]=0|r[0]+a,r[1]=0|r[1]+s,r[2]=0|r[2]+l,r[3]=0|r[3]+c,r[4]=0|r[4]+g,r[5]=0|r[5]+u,r[6]=0|r[6]+f,r[7]=0|r[7]+p}},sjcl.mode.ccm={name:"ccm",encrypt:function(e,t,o,i,r){var n,a=t.slice(0),s=sjcl.bitArray,l=s.bitLength(o)/8,c=s.bitLength(a)/8,r=r||64,i=i||[];if(7>l)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(n=2;4>n&&c>>>8*n;n++);return 15-l>n&&(n=15-l),o=s.clamp(o,8*(15-n)),t=sjcl.mode.ccm.F(e,t,o,i,r,n),a=sjcl.mode.ccm.H(e,a,o,t,r,n),s.concat(a.data,a.tag)},decrypt:function(e,t,o,i,r){var r=r||64,i=i||[],n=sjcl.bitArray,a=n.bitLength(o)/8,s=n.bitLength(t),l=n.clamp(t,s-r),c=n.bitSlice(t,s-r),s=(s-r)/8;if(7>a)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(t=2;4>t&&s>>>8*t;t++);if(15-a>t&&(t=15-a),o=n.clamp(o,8*(15-t)),l=sjcl.mode.ccm.H(e,l,o,c,r,t),e=sjcl.mode.ccm.F(e,l.data,o,i,r,t),!n.equal(l.tag,e))throw new sjcl.exception.corrupt("ccm: tag doesn't match");return l.data},F:function(e,t,o,i,r,n){var a=[],s=sjcl.bitArray,l=s.O,r=r/8;if(r%2||4>r||r>16)throw new sjcl.exception.invalid("ccm: invalid tag length");if(i.length>4294967295||t.length>4294967295)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");if(n=[s.partial(8,(i.length?64:0)|r-2<<2|n-1)],n=s.concat(n,o),n[3]=n[3]|s.bitLength(t)/8,n=e.encrypt(n),i.length)for(o=s.bitLength(i)/8,65279>=o?a=[s.partial(16,o)]:4294967295>=o&&(a=s.concat([s.partial(16,65534)],[o])),a=s.concat(a,i),i=0;i<a.length;i+=4)n=e.encrypt(l(n,a.slice(i,i+4).concat([0,0,0])));for(i=0;i<t.length;i+=4)n=e.encrypt(l(n,t.slice(i,i+4).concat([0,0,0])));return s.clamp(n,8*r)},H:function(e,t,o,i,r,n){var a,s=sjcl.bitArray;a=s.O;var l=t.length,c=s.bitLength(t),o=s.concat([s.partial(8,n-1)],o).concat([0,0,0]).slice(0,4),i=s.bitSlice(a(i,e.encrypt(o)),0,r);if(!l)return{tag:i,data:[]};for(a=0;l>a;a+=4)o[3]++,r=e.encrypt(o),t[a]=t[a]^r[0],t[a+1]=t[a+1]^r[1],t[a+2]=t[a+2]^r[2],t[a+3]=t[a+3]^r[3];return{tag:i,data:s.clamp(t,c)}}},sjcl.misc.hmac=function(e,t){this.K=t=t||sjcl.hash.sha256;var o=[[],[]],i=t.prototype.blockSize/32;for(this.k=[new t,new t],e.length>i&&(e=t.hash(e)),t=0;i>t;t++)o[0][t]=909522486^e[t],o[1][t]=1549556828^e[t];this.k[0].update(o[0]),this.k[1].update(o[1])},sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(e){return e=new this.K(this.k[0]).update(e).finalize(),new this.K(this.k[1]).update(e).finalize()},sjcl.misc.pbkdf2=function(e,t,o,i,r){if(o=o||1e3,0>i||0>o)throw sjcl.exception.invalid("invalid params to pbkdf2");"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e));var n,a,s,l,r=r||sjcl.misc.hmac,e=new r(e),c=[],g=sjcl.bitArray;for(l=1;32*c.length<(i||1);l++){for(r=n=e.encrypt(g.concat(t,[l])),a=1;o>a;a++)for(n=e.encrypt(n),s=0;s<n.length;s++)r[s]=r[s]^n[s];c=c.concat(r)}return i&&(c=g.clamp(c,i)),c},sjcl.random={randomWords:function(e,t){var o,i=[],t=this.isReady(t);if(0===t)throw new sjcl.exception.notReady("generator isn't seeded");for(2&t&&this.T(!(1&t)),t=0;e>t;t+=4)0===(t+1)%65536&&this.J(),o=this.u(),i.push(o[0],o[1],o[2],o[3]);return this.J(),i.slice(0,e)},setDefaultParanoia:function(e){this.s=e},addEntropy:function(e,t,o){var i,r,o=o||"user",n=(new Date).valueOf(),a=this.p[o],s=this.isReady(),l=0;switch(i=this.D[o],void 0===i&&(i=this.D[o]=this.Q++),void 0===a&&(a=this.p[o]=0),this.p[o]=(this.p[o]+1)%this.b.length,typeof e){case"number":void 0===t&&(t=1),this.b[a].update([i,this.t++,1,t,n,1,0|e]);break;case"object":if(o=Object.prototype.toString.call(e),"[object Uint32Array]"===o){for(r=[],o=0;o<e.length;o++)r.push(e[o]);e=r}else for("[object Array]"!==o&&(l=1),o=0;o<e.length&&!l;o++)"number"!=typeof e[o]&&(l=1);if(!l){if(void 0===t)for(o=t=0;o<e.length;o++)for(r=e[o];r>0;)t++,r>>>=1;this.b[a].update([i,this.t++,2,t,n,e.length].concat(e))}break;case"string":void 0===t&&(t=e.length),this.b[a].update([i,this.t++,3,t,n,e.length]),this.b[a].update(e);break;default:l=1}if(l)throw new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string");this.j[a]=this.j[a]+t,this.f=this.f+t,0===s&&(0!==this.isReady()&&this.I("seeded",Math.max(this.g,this.f)),this.I("progress",this.getProgress()))},isReady:function(e){return e=this.A[void 0!==e?e:this.s],this.g&&this.g>=e?this.j[0]>80&&(new Date).valueOf()>this.M?3:1:this.f>=e?2:0},getProgress:function(e){return e=this.A[e?e:this.s],this.g>=e?1:this.f>e?1:this.f/e},startCollectors:function(){if(!this.l){if(window.addEventListener)window.addEventListener("load",this.n,!1),window.addEventListener("mousemove",this.o,!1);else{if(!document.attachEvent)throw new sjcl.exception.bug("can't attach event");document.attachEvent("onload",this.n),document.attachEvent("onmousemove",this.o)}this.l=!0}},stopCollectors:function(){this.l&&(window.removeEventListener?(window.removeEventListener("load",this.n,!1),window.removeEventListener("mousemove",this.o,!1)):window.detachEvent&&(window.detachEvent("onload",this.n),window.detachEvent("onmousemove",this.o)),this.l=!1)},addEventListener:function(e,t){this.q[e][this.P++]=t},removeEventListener:function(e,t){var o,e=this.q[e],i=[];for(o in e)e.hasOwnProperty(o)&&e[o]===t&&i.push(o);for(t=0;t<i.length;t++)o=i[t],delete e[o]},b:[new sjcl.hash.sha256],j:[0],z:0,p:{},t:0,D:{},Q:0,g:0,f:0,M:0,a:[0,0,0,0,0,0,0,0],d:[0,0,0,0],r:void 0,s:6,l:!1,q:{progress:{},seeded:{}},P:0,A:[0,48,64,96,128,192,256,384,512,768,1024],u:function(){for(var e=0;4>e&&(this.d[e]=0|this.d[e]+1,!this.d[e]);e++);return this.r.encrypt(this.d)},J:function(){this.a=this.u().concat(this.u()),this.r=new sjcl.cipher.aes(this.a)},S:function(e){for(this.a=sjcl.hash.sha256.hash(this.a.concat(e)),this.r=new sjcl.cipher.aes(this.a),e=0;4>e&&(this.d[e]=0|this.d[e]+1,!this.d[e]);e++);},T:function(e){var t,o=[],i=0;for(this.M=o[0]=(new Date).valueOf()+3e4,t=0;16>t;t++)o.push(0|4294967296*Math.random());for(t=0;t<this.b.length&&(o=o.concat(this.b[t].finalize()),i+=this.j[t],this.j[t]=0,e||!(this.z&1<<t));t++);this.z>=1<<this.b.length&&(this.b.push(new sjcl.hash.sha256),this.j.push(0)),this.f=this.f-i,i>this.g&&(this.g=i),this.z++,this.S(o)},o:function(e){sjcl.random.addEntropy([e.x||e.clientX||e.offsetX||0,e.y||e.clientY||e.offsetY||0],2,"mouse")},n:function(){sjcl.random.addEntropy((new Date).valueOf(),2,"loadtime")},I:function(e,t){var o,e=sjcl.random.q[e],i=[];for(o in e)e.hasOwnProperty(o)&&i.push(e[o]);for(o=0;o<i.length;o++)i[o](t)}};try{var s=new Uint32Array(32);crypto.getRandomValues(s),sjcl.random.addEntropy(s,1024,"crypto['getRandomValues']")}catch(t){}sjcl.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},encrypt:function(e,t,o,i){var r,o=o||{},i=i||{},n=sjcl.json,a=n.c({iv:sjcl.random.randomWords(4,0)},n.defaults);if(n.c(a,o),o=a.adata,"string"==typeof a.salt&&(a.salt=sjcl.codec.base64.toBits(a.salt)),"string"==typeof a.iv&&(a.iv=sjcl.codec.base64.toBits(a.iv)),!sjcl.mode[a.mode]||!sjcl.cipher[a.cipher]||"string"==typeof e&&a.iter<=100||64!==a.ts&&96!==a.ts&&128!==a.ts||128!==a.ks&&192!==a.ks&&256!==a.ks||a.iv.length<2||a.iv.length>4)throw new sjcl.exception.invalid("json encrypt: invalid parameters");return"string"==typeof e&&(r=sjcl.misc.cachedPbkdf2(e,a),e=r.key.slice(0,a.ks/32),a.salt=r.salt),"string"==typeof t&&(t=sjcl.codec.utf8String.toBits(t)),"string"==typeof o&&(o=sjcl.codec.utf8String.toBits(o)),r=new sjcl.cipher[a.cipher](e),n.c(i,a),i.key=e,a.ct=sjcl.mode[a.mode].encrypt(r,t,a.iv,o,a.ts),n.encode(a)},decrypt:function(e,t,o,i){var r,o=o||{},i=i||{},n=sjcl.json,t=n.c(n.c(n.c({},n.defaults),n.decode(t)),o,!0),o=t.adata;if("string"==typeof t.salt&&(t.salt=sjcl.codec.base64.toBits(t.salt)),"string"==typeof t.iv&&(t.iv=sjcl.codec.base64.toBits(t.iv)),!sjcl.mode[t.mode]||!sjcl.cipher[t.cipher]||"string"==typeof e&&t.iter<=100||64!==t.ts&&96!==t.ts&&128!==t.ts||128!==t.ks&&192!==t.ks&&256!==t.ks||!t.iv||t.iv.length<2||t.iv.length>4)throw new sjcl.exception.invalid("json decrypt: invalid parameters");return"string"==typeof e&&(r=sjcl.misc.cachedPbkdf2(e,t),e=r.key.slice(0,t.ks/32),t.salt=r.salt),"string"==typeof o&&(o=sjcl.codec.utf8String.toBits(o)),r=new sjcl.cipher[t.cipher](e),o=sjcl.mode[t.mode].decrypt(r,t.ct,t.iv,o,t.ts),n.c(i,t),i.key=e,sjcl.codec.utf8String.fromBits(o)},encode:function(e){var t,o="{",i="";for(t in e)if(e.hasOwnProperty(t)){if(!t.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");switch(o+=i+'"'+t+'":',i=",",typeof e[t]){case"number":case"boolean":o+=e[t];break;case"string":o+='"'+escape(e[t])+'"';break;case"object":o+='"'+sjcl.codec.base64.fromBits(e[t],0)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type")}}return o+"}"},decode:function(e){if(e=e.replace(/\s/g,""),!e.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");var t,o,e=e.replace(/^\{|\}$/g,"").split(/,/),i={};for(t=0;t<e.length;t++){if(!(o=e[t].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");i[o[2]]=o[3]?parseInt(o[3],10):o[2].match(/^(ct|salt|iv)$/)?sjcl.codec.base64.toBits(o[4]):unescape(o[4])
}return i},c:function(e,t,o){if(void 0===e&&(e={}),void 0===t)return e;for(var i in t)if(t.hasOwnProperty(i)){if(o&&void 0!==e[i]&&e[i]!==t[i])throw new sjcl.exception.invalid("required parameter overridden");e[i]=t[i]}return e},V:function(e,t){var o,i={};for(o in e)e.hasOwnProperty(o)&&e[o]!==t[o]&&(i[o]=e[o]);return i},U:function(e,t){var o,i={};for(o=0;o<t.length;o++)void 0!==e[t[o]]&&(i[t[o]]=e[t[o]]);return i}},sjcl.encrypt=sjcl.json.encrypt,sjcl.decrypt=sjcl.json.decrypt,sjcl.misc.R={},sjcl.misc.cachedPbkdf2=function(e,t){var o,i=sjcl.misc.R,t=t||{};return o=t.iter||1e3,i=i[e]=i[e]||{},o=i[o]=i[o]||{firstSalt:t.salt&&t.salt.length?t.salt.slice(0):sjcl.random.randomWords(2,0)},i=void 0===t.salt?o.firstSalt:t.salt,o[i]=o[i]||sjcl.misc.pbkdf2(e,i,t.iter),{key:o[i].slice(0),salt:i.slice(0)}};var FirebaseSimpleLogin=function(e,t,o){var i=e.toString(),r=null;if(fb.util.validation.validateArgCount("new FirebaseSimpleLogin",1,3,arguments.length),fb.util.validation.validateCallback("new FirebaseSimpleLogin",2,t,!1),"string"==typeof e)throw Error("new FirebaseSimpleLogin(): Oops, it looks like you passed a string instead of a Firebase reference (i.e. new Firebase(<firebaseURL>)).");if(goog.isString(i)){var n=i.indexOf("//");n>=0&&(i=i.substring(n+2)),n=i.indexOf("."),n>=0&&(r=i.substring(0,n))}if(!goog.isString(r))throw Error("new FirebaseSimpleLogin(): First argument must be a valid Firebase reference (i.e. new Firebase(<firebaseURL>)).");"file:"===window.location.protocol&&!this.isMobilePhoneGap()&&!this.isMobileTriggerIo()&&console&&console.log&&console.log("FirebaseSimpleLogin(): Due to browser security restrictions, loading applications via `file://*` URLs will prevent popup-based authentication providers from working properly. When testing locally, you'll need to run a barebones webserver on your machine rather than loading your test files via `file://*`. The easiest way to run a barebones server on your local machine is to `cd` to the root directory of your code and run `python -m SimpleHTTPServer`, which will allow you to access your content via `http://127.0.0.1:8000/*`."),this.mRef=e,this.mNamespace=r,this.mApiHost="https://auth.firebase.com",this.sessionLengthDays=null,this.mLoginStateChange=function(){var i=Array.prototype.slice.apply(arguments),r={anonymous:["uid","firebaseAuthToken","id","provider"],password:"uid email firebaseAuthToken id md5_hash provider".split(" "),facebook:"uid accessToken displayName firebaseAuthToken id provider".split(" "),github:"uid accessToken displayName firebaseAuthToken id provider username".split(" "),persona:"uid email firebaseAuthToken id md5_hash provider".split(" "),twitter:"uid accessToken accessTokenSecret displayName firebaseAuthToken id provider username".split(" ")};if("function"==typeof window.Proxy&&2===window.Proxy.length&&i[1]&&i[1].provider){var n=i[1].provider;Firebase&&Firebase.INTERNAL&&Firebase.INTERNAL.statsIncrementCounter&&(i[1]=new Proxy(i[1],{get:function(t,o){return 0>r[n].indexOf(o)&&Firebase.INTERNAL.statsIncrementCounter(e,"simple_login_undocumented_attribute_use."+o),t[o]}}))}setTimeout(function(){t.apply(o,i)},0)},this.resumeSession()};goog.exportSymbol("FirebaseSimpleLogin",FirebaseSimpleLogin),FirebaseSimpleLogin.onOpen=function(e){fb.simplelogin.winchan.onOpen(e)},goog.exportProperty(FirebaseSimpleLogin,"onOpen",FirebaseSimpleLogin.onOpen),FirebaseSimpleLogin.prototype.hasLocalStorage=function(){try{localStorage.setItem("firebase-sentinel","test");var e=localStorage.getItem("firebase-sentinel");return localStorage.removeItem("firebase-sentinel"),"test"===e}catch(t){}return!1},FirebaseSimpleLogin.prototype.resumeSession=function(){var e={};if(this.hasLocalStorage()){var t=this.readCookie("firebaseSessionKey"),o=localStorage.getItem("firebaseSession");if(t&&o)try{e=fb.util.json.eval(sjcl.decrypt(t,fb.util.json.eval(o)))}catch(i){}}e&&e.token&&e.user?this.attemptAuth(e.token,e.user,!1):this.mLoginStateChange(null,null)},FirebaseSimpleLogin.prototype.saveSession=function(e,t){if(this.hasLocalStorage()){var o=t.sessionKey,i=sjcl.encrypt(o,fb.util.json.stringify({token:e,user:t}));this.writeCookie("firebaseSessionKey",o,this.sessionLengthDays),localStorage.setItem("firebaseSession",fb.util.json.stringify(i))}},FirebaseSimpleLogin.prototype.clearSession=function(){this.hasLocalStorage()&&(this.writeCookie("firebaseSessionKey","",-1),localStorage.removeItem("firebaseSession"))},FirebaseSimpleLogin.prototype.writeCookie=function(e,t,o){var i="";o&&(i=new Date,i.setTime(i.getTime()+864e5*o),i="; expires="+i.toGMTString()),document.cookie=e+"="+t+i+"; path=/"},FirebaseSimpleLogin.prototype.readCookie=function(e){for(var e=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var i=t[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null},FirebaseSimpleLogin.prototype.attemptAuth=function(e,t,o){var i=this;this.mRef.auth(e,function(r,n){r?(i.clearSession(),i.mLoginStateChange(null,null)):(o&&i.saveSession(e,t),"function"==typeof n&&n(),delete t.sessionKey,t.firebaseAuthToken=e,i.mLoginStateChange(null,t))},function(){i.clearSession(),i.mLoginStateChange(null,null)})},FirebaseSimpleLogin.prototype.login=function(e){fb.util.validation.validateString(i,1,e,!1);var t=this,o={},e=e.toLowerCase(),i="FirebaseSimpleLogin.login("+e+")";if("password"===e){if(o=arguments[1]||{},!fb.simplelogin.validation.isValidEmail(o.email))return this.mLoginStateChange(this.formatError({code:"INVALID_EMAIL",message:"Invalid email specified."}));if(!fb.simplelogin.validation.isValidPassword(o.password))return this.mLoginStateChange(this.formatError({code:"INVALID_PASSWORD",message:"Invalid password specified."}))}else("facebook"===e||"github"===e||"persona"===e||"twitter"===e||"anonymous"===e)&&(fb.util.validation.validateArgCount(i,1,2,arguments.length),o=arguments[1]||{});var r=this.mLoginStateChange;switch(this.sessionLengthDays=o.rememberMe?30:null,e){case"password":this.jsonp("/auth/firebase",{email:o.email,password:o.password},function(e,o){e||!o.token?r(t.formatError(e)):t.attemptAuth(o.token,o.user,!0)});break;case"github":o.height=850,o.width=950;case"facebook":case"twitter":i="twitter"===e&&o.user_id&&o.oauth_token&&o.oauth_token_secret,"facebook"===e&&o.access_token||i?this.jsonp("/auth/"+e+"/token",o,function(e,o){e||!o.token?r(t.formatError(e)):t.attemptAuth(o.token,o.user,!0)}):this.launchAuthWindow(e,o,function(e,o,i){e?t.mLoginStateChange(t.formatError(e),null):t.attemptAuth(o,i,!0)});break;case"persona":if(!navigator.id)throw Error(i+": Unable to find Persona include.js");fb.simplelogin.persona.login(function(e){null===e?r(t.formatError({code:"UNKNOWN_ERROR",message:"User denied authentication request or an error occurred."})):t.jsonp("/auth/persona/token",{assertion:e},function(e,o){e||!o.token?r(t.formatError(e),null):t.attemptAuth(o.token,o.user,!0)})});break;case"anonymous":t.jsonp("/auth/anonymous",{},function(e,o){e||!o.token?r(t.formatError(e),null):t.attemptAuth(o.token,o.user,!0)});break;default:throw Error("FirebaseSimpleLogin.login() failed: unrecognized authentication provider")}},goog.exportProperty(FirebaseSimpleLogin.prototype,"login",FirebaseSimpleLogin.prototype.login),FirebaseSimpleLogin.prototype.logout=function(){fb.util.validation.validateArgCount("FirebaseSimpleLogin.logout",0,0,arguments.length),this.clearSession(),this.mRef.unauth(),this.mLoginStateChange(null,null)},goog.exportProperty(FirebaseSimpleLogin.prototype,"logout",FirebaseSimpleLogin.prototype.logout),FirebaseSimpleLogin.prototype.parseURL=function(e){var t=document.createElement("a");t.href=e;for(var o,e=t.protocol.replace(":",""),i=t.hostname,r=t.port,n=t.search,a={},s=t.search.replace(/^\?/,"").split("&"),l=s.length,c=0;l>c;c++)s[c]&&(o=s[c].split("="),a[o[0]]=o[1]);return{protocol:e,host:i,port:r,query:n,params:a,hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1")}},FirebaseSimpleLogin.prototype.isMobilePhoneGap=function(){return(window.cordova||window.PhoneGap||window.phonegap)&&/^file:\/{3}[^\/]/i.test(window.location.href)&&/ios|iphone|ipod|ipad|android/i.test(navigator.userAgent)},FirebaseSimpleLogin.prototype.isMobileTriggerIo=function(){return window.forge&&/^file:\/{3}[^\/]/i.test(window.location.href)&&/ios|iphone|ipod|ipad|android/i.test(navigator.userAgent)},FirebaseSimpleLogin.prototype.launchAuthWindow=function(e,t,o){var i=this,e=this.mApiHost+"/auth/"+e+"?firebase="+this.mNamespace;t.scope&&(e+="&scope="+t.scope);var r={menubar:0,location:0,resizable:0,scrollbars:1,status:0,dialog:1,width:700,height:375};if(t.height&&(r.height=t.height,delete t.height),t.width&&(r.width=t.width,delete t.width),this.isMobilePhoneGap()){var n=window.open(e+"&internalRedirect=true&transport=internalRedirect","blank","location=no"),a=!1;n.addEventListener("loadstop",function(e){try{var t=i.parseURL(e.url);if("/auth/_blank"===t.path){n.close();var r,s=t.params,e={};for(r in s)try{e[r]=fb.util.json.eval(decodeURIComponent(s[r]))}catch(l){}if(!a)return a=!0,e&&e.error?o(e.error):e&&e.token&&e.user?o(null,e.token,e.user):o({code:"UNKNOWN_ERROR",message:"An unknown error occurred."})}}catch(c){if(n.close(),!a)return a=!0,o({code:"UNKNOWN_ERROR",message:"An unknown error occurred."})}}),n.addEventListener("exit",function(){return a?void 0:(a=!0,o({code:"UNKNOWN_ERROR",message:"An unknown error occurred."}))}),setTimeout(function(){n&&n.close&&n.close()},4e4)}else if(this.isMobileTriggerIo()){if(!window.forge||!window.forge.tabs)return o({code:"TRIGGER_IO_ERROR",message:'"forge.tabs" module required when using Firebase Simple Login and Trigger.io'});forge.tabs.openWithOptions({url:e+"&internalRedirect=true&transport=internalRedirect",pattern:this.mApiHost+"/auth/_blank*"},function(e){var t=null;if(e&&e.url)try{var r,n=i.parseURL(e.url).params,t={};for(r in n)t[r]=fb.util.json.eval(decodeURIComponent(n[r]))}catch(a){}else if(e&&e.userCancelled)return o({code:"USER_DENIED",message:"User cancelled the authentication request."});return t&&t.token&&t.user?o(null,t.token,t.user):t&&t.error?o(t.error):o({code:"UNKNOWN_ERROR",message:"An unknown error occurred."})},function(){o({code:"UNKNOWN_ERROR",message:"An unknown error occurred."})})}else{var s,t=[];for(s in r)t.push(s+"="+r[s]);fb.simplelogin.winchan.open({url:e+"&transport=winchan",relay_url:this.mApiHost+"/auth/channel",window_features:t.join(",")},function(e,t){t&&t.token&&t.user?o(null,t.token,t.user):"unknown closed window"===e?o({code:"USER_DENIED",message:"User cancelled the authentication request."}):t.error?o(t.error):o({code:"UNKNOWN_ERROR",message:"An unknown error occurred."})})}},FirebaseSimpleLogin.prototype.createUser=function(e,t,o){var i=this;return fb.util.validation.validateArgCount("FirebaseSimpleLogin.createUser",3,3,arguments.length),fb.util.validation.validateCallback("FirebaseSimpleLogin.createUser",3,o,!1),fb.simplelogin.validation.isValidEmail(e)?fb.simplelogin.validation.isValidPassword(t)?(this.jsonp("/auth/firebase/create",{email:e,password:t},function(e,t){e?o(i.formatError(e),null):o(null,t)}),void 0):o(this.formatError({code:"INVALID_PASSWORD",message:"Invalid password specified. "})):o(this.formatError({code:"INVALID_EMAIL",message:"Invalid email specified."}))},goog.exportProperty(FirebaseSimpleLogin.prototype,"createUser",FirebaseSimpleLogin.prototype.createUser),FirebaseSimpleLogin.prototype.changePassword=function(e,t,o,i){var r=this;return fb.util.validation.validateArgCount("FirebaseSimpleLogin.changePassword",4,4,arguments.length),fb.util.validation.validateCallback("FirebaseSimpleLogin.changePassword",4,i,!1),fb.simplelogin.validation.isValidEmail(e)?fb.simplelogin.validation.isValidPassword(t)&&fb.simplelogin.validation.isValidPassword(o)?(this.jsonp("/auth/firebase/update",{email:e,oldPassword:t,newPassword:o},function(e){e?i(r.formatError(e),!1):i(null,!0)}),void 0):i(this.formatError({code:"INVALID_PASSWORD",message:"Invalid password specified. "})):i(this.formatError({code:"INVALID_EMAIL",message:"Invalid email specified."}))},goog.exportProperty(FirebaseSimpleLogin.prototype,"changePassword",FirebaseSimpleLogin.prototype.changePassword),FirebaseSimpleLogin.prototype.removeUser=function(e,t,o){var i=this;return fb.util.validation.validateArgCount("FirebaseSimpleLogin.removeUser",3,3,arguments.length),fb.util.validation.validateCallback("FirebaseSimpleLogin.removeUser",3,o,!1),fb.simplelogin.validation.isValidEmail(e)?fb.simplelogin.validation.isValidPassword(t)?(this.jsonp("/auth/firebase/remove",{email:e,password:t},function(e){e?o(i.formatError(e),!1):o(null,!0)}),void 0):o(this.formatError({code:"INVALID_PASSWORD",message:"Invalid password specified. "})):o(this.formatError({code:"INVALID_EMAIL",message:"Invalid email specified."}))},goog.exportProperty(FirebaseSimpleLogin.prototype,"removeUser",FirebaseSimpleLogin.prototype.removeUser),FirebaseSimpleLogin._callbacks={},FirebaseSimpleLogin.prototype.jsonp=function(e,t,o){var i,r=this,n=this.mApiHost+e,n=n+(/\?/.test(n)?"":"?"),n=n+("&firebase="+this.mNamespace),n=n+"&transport=jsonp";for(i in t)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(t[i]);var a="_firebaseXDR"+(new Date).getTime().toString()+Math.floor(100*Math.random()),n=n+("&callback="+encodeURIComponent("FirebaseSimpleLogin._callbacks."+a));FirebaseSimpleLogin._callbacks[a]=function(e){var t=e.error||null;delete e.error,o(t,e),setTimeout(function(){delete FirebaseSimpleLogin._callbacks[a];var e=document.getElementById(a);null!==e&&e.parentNode.removeChild(e)})},setTimeout(function(){try{var e=document.createElement("script");e.type="text/javascript",e.id=a,e.async=!0,e.src=n,e.onerror=function(){var e=document.getElementById(a);null!==e&&e.parentNode.removeChild(e),o(r.formatError({code:"SERVER_ERROR",message:"An unknown server error occurred."}))};var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}catch(i){o(r.formatError({code:"SERVER_ERROR",message:"An unknown server error occurred."}))}},1)},FirebaseSimpleLogin.prototype.formatError=function(e){var t=Error(e.message||"");return t.code=e.code||"UNKNOWN_ERROR",t};var FirebaseAuthClient=function(e,t,o){return Firebase&&Firebase.INTERNAL&&Firebase.INTERNAL.statsIncrementCounter&&Firebase.INTERNAL.statsIncrementCounter(e,"simple_login_deprecated_constructor"),"undefined"!=typeof console&&("undefined"!=typeof console.warn?console.warn("FirebaseAuthClient class being deprecated. Please use https://cdn.firebase.com/v0/firebase-simple-login.js and reference FirebaseSimpleLogin instead."):console.log("FirebaseAuthClient class being deprecated. Please use https://cdn.firebase.com/v0/firebase-simple-login.js and reference FirebaseSimpleLogin instead.")),new FirebaseSimpleLogin(e,t,o)};goog.exportSymbol("FirebaseAuthClient",FirebaseAuthClient),FirebaseAuthClient.onOpen=FirebaseSimpleLogin.onOpen,goog.exportProperty(FirebaseAuthClient,"onOpen",FirebaseAuthClient.onOpen)}();