!function(){"use strict";var e=WinJS.Navigation;WinJS.Namespace.define("Application",{PageControlNavigator:WinJS.Class.define(function(t,n){this._element=t||document.createElement("div"),this._element.appendChild(this._createPageElement()),this.home=n.home,e.onnavigated=this._navigated.bind(this),window.onresize=this._resized.bind(this),document.body.onkeyup=this._keyupHandler.bind(this),document.body.onkeypress=this._keypressHandler.bind(this),document.body.onmspointerup=this._mspointerupHandler.bind(this),Application.navigator=this},{home:"",_element:null,_lastNavigationPromise:WinJS.Promise.as(),pageControl:{get:function(){return this.pageElement&&this.pageElement.winControl}},pageElement:{get:function(){return this._element.firstElementChild}},_createPageElement:function(){var e=document.createElement("div");return e.setAttribute("dir",window.getComputedStyle(this._element,null).direction),e.style.width="100%",e.style.height="100%",e},_getAnimationElements:function(){return this.pageControl&&this.pageControl.getAnimationElements?this.pageControl.getAnimationElements():this.pageElement},_keypressHandler:function(t){"Backspace"===t.key&&e.back()},_keyupHandler:function(t){"Left"===t.key&&t.altKey||"BrowserBack"===t.key?e.back():("Right"===t.key&&t.altKey||"BrowserForward"===t.key)&&e.forward()},_mspointerupHandler:function(t){3===t.button?e.back():4===t.button&&e.forward()},_navigated:function(e){var t,n=this._createPageElement(),i=new WinJS.Promise(function(e){t=e});this._lastNavigationPromise.cancel(),this._lastNavigationPromise=WinJS.Promise.timeout().then(function(){return WinJS.UI.Pages.render(e.detail.location,n,e.detail.state,i)}).then(function(){var e=this.pageElement;e.winControl&&e.winControl.unload&&e.winControl.unload(),this._element.appendChild(n),this._element.removeChild(e),e.innerText="",this._updateBackButton(),t(),WinJS.UI.Animation.enterPage(this._getAnimationElements()).done()}.bind(this)),e.detail.setPromise(this._lastNavigationPromise)},_resized:function(){this.pageControl&&this.pageControl.updateLayout&&this.pageControl.updateLayout.call(this.pageControl,this.pageElement)},_updateBackButton:function(){var t=this.pageElement.querySelector("header[role=banner] .win-backbutton");t&&(t.onclick=function(){e.back()},e.canGoBack?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled"))}})})}();